// Generated by CoffeeScript 2.7.0
import {
  g,
  print,
  range,
  scalex,
  scaley
} from './globals.js';

import {
  Page
} from './page.js';

import {
  Button,
  spread
} from './button.js';

import {
  Lista
} from './lista.js';

export var Names = class Names extends Page {
  constructor() {
    super();
    this.buttons.n.active = false;
    this.buttons.ArrowLeft = new Button('', '', () => {
      return g.setState(g.TABLES);
    });
    this.buttons.ArrowRight = new Button('', '', () => {
      return g.setState(g.ACTIVE);
    });
  }

  setLista() {
    this.lista = new Lista(this.t.playersByName, "Table Name", this.buttons, (p) => {
      var r, s;
      r = this.t.round - 1;
      if (p.active && g.BYE !== _.last(p.opp)) {
        s = `${str(1 + Math.floor(p.chair / 2)).padStart(3)} ${g.RINGS[p.col[r][0]]} `;
      } else if (!p.active) {
        s = "   P  ";
      } else {
        s = "  BYE ";
      }
      return s + g.txtT(p.name, 25, window.LEFT);
    });
    return spread(this.buttons, 10, this.y, this.h);
  }

  mouseWheel(event) {
    return this.lista.mouseWheel(event);
  }

  mousePressed(event) {
    return this.lista.mousePressed(event);
  }

  keyPressed(event) {
    return this.buttons[key].click();
  }

  make(res, header, playersByName) {
    var i, j, len, player, r;
    res.push("NAMES" + header);
    res.push("");
    r = this.t.round;
    for (i = j = 0, len = playersByName.length; j < len; i = ++j) {
      player = playersByName[i];
      if (i % this.t.ppp === 0) {
        res.push("Table Name");
      }
      if (player.active && g.BYE !== player.opp[r]) {
        res.push(`${str(1 + Math.floor(player.chair / 2)).padStart(3)} ${g.RINGS[player.col[r][0]]} ${player.name}`);
      } else if (!player.active) {
        res.push(`   P  ${player.name}`);
      } else {
        res.push(`  BYE ${player.name}`);
      }
      if (i % this.t.ppp === this.t.ppp - 1) {
        res.push("\f");
      }
    }
    return res.push("\f");
  }

  draw() {
    var button, key, ref, results;
    fill('white');
    this.showHeader(this.t.round);
    this.lista.draw();
    ref = this.buttons;
    results = [];
    for (key in ref) {
      button = ref[key];
      results.push(button.draw());
    }
    return results;
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZV9uYW1lcy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcIiwic291cmNlcyI6WyJjb2ZmZWVcXHBhZ2VfbmFtZXMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFBO0VBQVMsQ0FBVDtFQUFXLEtBQVg7RUFBaUIsS0FBakI7RUFBdUIsTUFBdkI7RUFBOEIsTUFBOUI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxJQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsTUFBVDtFQUFnQixNQUFoQjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLEtBQVQ7Q0FBQSxNQUFBOztBQUVBLE9BQUEsSUFBYSxRQUFOLE1BQUEsTUFBQSxRQUFvQixLQUFwQjtFQUVOLFdBQWMsQ0FBQSxDQUFBO1NBQ2IsQ0FBQTtJQUNBLElBQUMsQ0FBQSxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQVgsR0FBb0I7SUFDcEIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxTQUFULEdBQXNCLElBQUksTUFBSixDQUFXLEVBQVgsRUFBZSxFQUFmLEVBQW1CLENBQUEsQ0FBQSxHQUFBO2FBQU0sQ0FBQyxDQUFDLFFBQUYsQ0FBVyxDQUFDLENBQUMsTUFBYjtJQUFOLENBQW5CO0lBQ3RCLElBQUMsQ0FBQSxPQUFPLENBQUMsVUFBVCxHQUFzQixJQUFJLE1BQUosQ0FBVyxFQUFYLEVBQWUsRUFBZixFQUFtQixDQUFBLENBQUEsR0FBQTthQUFNLENBQUMsQ0FBQyxRQUFGLENBQVcsQ0FBQyxDQUFDLE1BQWI7SUFBTixDQUFuQjtFQUpUOztFQU1kLFFBQVcsQ0FBQSxDQUFBO0lBQ1YsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFJLEtBQUosQ0FBVSxJQUFDLENBQUEsQ0FBQyxDQUFDLGFBQWIsRUFBNEIsWUFBNUIsRUFBMEMsSUFBQyxDQUFBLE9BQTNDLEVBQW9ELENBQUMsQ0FBRCxDQUFBLEdBQUE7QUFDL0QsVUFBQSxDQUFBLEVBQUE7TUFBRyxDQUFBLEdBQUksSUFBQyxDQUFBLENBQUMs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UyxJQUFUO0VBYk07O0VBZVAsSUFBTyxDQUFBLENBQUE7QUFDUixRQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0lBQUUsSUFBQSxDQUFLLE9BQUw7SUFDQSxJQUFDLENBQUEsVUFBRCxDQUFZLElBQUMsQ0FBQSxDQUFDLENBQUMsS0FBZjtJQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBUCxDQUFBO0FBQ0E7QUFBQTtJQUFBLEtBQUEsVUFBQTs7bUJBQ0MsTUFBTSxDQUFDLElBQVAsQ0FBQTtJQURELENBQUE7O0VBSk07O0FBdkNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZyxwcmludCxyYW5nZSxzY2FsZXgsc2NhbGV5IH0gZnJvbSAnLi9nbG9iYWxzLmpzJyBcclxuaW1wb3J0IHsgUGFnZSB9IGZyb20gJy4vcGFnZS5qcycgXHJcbmltcG9ydCB7IEJ1dHRvbixzcHJlYWQgfSBmcm9tICcuL2J1dHRvbi5qcycgXHJcbmltcG9ydCB7IExpc3RhIH0gZnJvbSAnLi9saXN0YS5qcycgIFxyXG5cclxuZXhwb3J0IGNsYXNzIE5hbWVzIGV4dGVuZHMgUGFnZVxyXG5cclxuXHRjb25zdHJ1Y3RvciA6IC0+XHJcblx0XHRzdXBlcigpXHJcblx0XHRAYnV0dG9ucy5uLmFjdGl2ZSA9IGZhbHNlXHJcblx0XHRAYnV0dG9ucy5BcnJvd0xlZnQgID0gbmV3IEJ1dHRvbiAnJywgJycsICgpID0+IGcuc2V0U3RhdGUgZy5UQUJMRVNcclxuXHRcdEBidXR0b25zLkFycm93UmlnaHQgPSBuZXcgQnV0dG9uICcnLCAnJywgKCkgPT4gZy5zZXRTdGF0ZSBnLkFDVElWRVxyXG5cclxuXHRzZXRMaXN0YSA6IC0+XHJcblx0XHRAbGlzdGEgPSBuZXcgTGlzdGEgQHQucGxheWVyc0J5TmFtZSwgXCJUYWJsZSBOYW1lXCIsIEBidXR0b25zLCAocCkgPT5cclxuXHRcdFx0ciA9IEB0LnJvdW5kIC0gMVxyXG5cdFx0XHRpZiBwLmFjdGl2ZSBhbmQgZy5CWUUgIT0gXy5sYXN0IHAub3BwXHJcblx0XHRcdFx0cyA9IFwiI3tzdHIoMSArIHAuY2hhaXIgLy8gMikucGFkU3RhcnQoMyl9ICN7Zy5SSU5HU1twLmNvbFtyXVswXV19IFwiXHJcblx0XHRcdGVsc2UgaWYgbm90IHAuYWN0aXZlXHJcblx0XHRcdFx0cyA9IFwiICAgUCAgXCJcclxuXHRcdFx0ZWxzZSBcclxuXHRcdFx0XHRzID0gXCIgIEJZRSBcIlxyXG5cdFx0XHRzICsgZy50eHRUIHAubmFtZSwgMjUsIHdpbmRvdy5MRUZUXHJcblx0XHRzcHJlYWQgQGJ1dHRvbnMsIDEwLCBAeSwgQGhcclxuXHJcblx0bW91c2VXaGVlbCAgIDogKGV2ZW50ICktPiBAbGlzdGEubW91c2VXaGVlbCBldmVudFxyXG5cdG1vdXNlUHJlc3NlZCA6IChldmVudCkgLT4gQGxpc3RhLm1vdXNlUHJlc3NlZCBldmVudFxyXG5cdGtleVByZXNzZWQgICA6IChldmVudCkgLT4gQGJ1dHRvbnNba2V5XS5jbGljaygpXHJcblxyXG5cdG1ha2UgOiAocmVzLGhlYWRlcixwbGF5ZXJzQnlOYW1lKSAtPlxyXG5cdFx0cmVzLnB1c2ggXCJOQU1FU1wiICsgaGVhZGVyXHJcblx0XHRyZXMucHVzaCBcIlwiXHJcblx0XHRyID0gQHQucm91bmRcclxuXHRcdGZvciBwbGF5ZXIsaSBpbiBwbGF5ZXJzQnlOYW1lXHJcblx0XHRcdGlmIGkgJSBAdC5wcHAgPT0gMCB0aGVuIHJlcy5wdXNoIFwiVGFibGUgTmFtZVwiXHJcblx0XHRcdGlmIHBsYXllci5hY3RpdmUgYW5kIGcuQllFICE9IHBsYXllci5vcHBbcl1cclxuXHRcdFx0XHRyZXMucHVzaCBcIiN7c3RyKDEgKyBwbGF5ZXIuY2hhaXIgLy8gMikucGFkU3RhcnQoMyl9ICN7Zy5SSU5HU1twbGF5ZXIuY29sW3JdWzBdXX0gI3twbGF5ZXIubmFtZX1cIlxyXG5cdFx0XHRlbHNlIGlmIG5vdCBwbGF5ZXIuYWN0aXZlXHJcblx0XHRcdFx0cmVzLnB1c2ggXCIgICBQICAje3BsYXllci5uYW1lfVwiXHJcblx0XHRcdGVsc2UgXHJcblx0XHRcdFx0cmVzLnB1c2ggXCIgIEJZRSAje3BsYXllci5uYW1lfVwiXHJcblx0XHRcdGlmIGkgJSBAdC5wcHAgPT0gQHQucHBwLTEgdGhlbiByZXMucHVzaCBcIlxcZlwiXHJcblx0XHRyZXMucHVzaCBcIlxcZlwiXHJcblxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0ZmlsbCAnd2hpdGUnXHJcblx0XHRAc2hvd0hlYWRlciBAdC5yb3VuZFxyXG5cdFx0QGxpc3RhLmRyYXcoKVxyXG5cdFx0Zm9yIGtleSxidXR0b24gb2YgQGJ1dHRvbnNcclxuXHRcdFx0YnV0dG9uLmRyYXcoKSJdfQ==
//# sourceURL=c:\github\ELO-Pairings\coffee\page_names.coffee