// Generated by CoffeeScript 2.7.0
import {
  g,
  print,
  range,
  scalex,
  scaley
} from './globals.js';

export var Button = class Button {
  constructor(title, help, click) {
    this.title = title;
    this.help = help;
    this.click = click;
    this.active = true;
    this.t = g.tournament;
  }

  draw() {
    textAlign(CENTER, CENTER);
    if (this.title === '') {
      return;
    }
    fill(this.active ? 'yellow' : 'lightgray');
    rect(scalex(this.x), scaley(this.y), scalex(this.w), scaley(this.h));
    fill('black');
    text(this.title, scalex(this.x + this.w / 2), scaley(this.y + this.h / 2));
    textAlign(LEFT, CENTER);
    if (this.inside(mouseX, mouseY)) {
      return text(this.help, 10, scaley(this.y + 3.2 * this.h / 2));
    } else if (mouseY < 20) {
      if (this.title === 'In') {
        return text(`Missing=${g.calcMissing()} Players=${g.N} Paused=${this.t.paused.length} Round=${this.t.round}`, 10, scaley(this.y + 3.2 * this.h / 2)); // else painted many times
      }
    }
  }

  inside(x, y) {
    return (scalex(this.x) <= x && x <= scalex(this.x + this.w)) && (scaley(this.y) <= y && y <= scaley(this.y + this.h));
  }

};

export var spread = function(buttons, letterWidth, y, h) {
  var button, key, results, x;
  x = letterWidth;
  results = [];
  for (key in buttons) {
    button = buttons[key];
    button.x = x;
    button.y = y;
    button.w = (button.title.length + 2) * letterWidth;
    button.h = h;
    if (button.title.length > 0 || key === "ArrowUp") {
      results.push(x += button.w + letterWidth);
    } else {
      results.push(void 0);
    }
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLmpzIiwic291cmNlUm9vdCI6Ii4uXFwiLCJzb3VyY2VzIjpbImNvZmZlZVxcYnV0dG9uLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBQTtFQUFTLENBQVQ7RUFBVyxLQUFYO0VBQWlCLEtBQWpCO0VBQXVCLE1BQXZCO0VBQThCLE1BQTlCO0NBQUEsTUFBQTs7QUFFQSxPQUFBLElBQWEsU0FBTixNQUFBLE9BQUE7RUFDTixXQUFjLE1BQUEsTUFBQSxPQUFBLENBQUE7SUFBQyxJQUFDLENBQUE7SUFBTyxJQUFDLENBQUE7SUFBTSxJQUFDLENBQUE7SUFDOUIsSUFBQyxDQUFBLE1BQUQsR0FBVTtJQUNWLElBQUMsQ0FBQSxDQUFELEdBQUssQ0FBQyxDQUFDO0VBRk07O0VBSWQsSUFBTyxDQUFBLENBQUE7SUFDTixTQUFBLENBQVUsTUFBVixFQUFpQixNQUFqQjtJQUNBLElBQUcsSUFBQyxDQUFBLEtBQUQsS0FBVSxFQUFiO0FBQXFCLGFBQXJCOztJQUVBLElBQUEsQ0FBUSxJQUFDLENBQUEsTUFBSixHQUFnQixRQUFoQixHQUE4QixXQUFuQztJQUNBLElBQUEsQ0FBSyxNQUFBLENBQU8sSUFBQyxDQUFBLENBQVIsQ0FBTCxFQUFnQixNQUFBLENBQU8sSUFBQyxDQUFBLENBQVIsQ0FBaEIsRUFBMkIsTUFBQSxDQUFPLElBQUMsQ0FBQSxDQUFSLENBQTNCLEVBQXNDLE1BQUEsQ0FBTyxJQUFDLENBQUEsQ0FBUixDQUF0QztJQUVBLElBQUEsQ0FBSyxPQUFMO0lBQ0EsSUFBQSxDQUFLLElBQUMsQ0FBQSxLQUFOLEVBQVksTUFBQSxDQUFPLElBQUMsQ0FBQSxDQUFELEdBQUcsSUFBQyxDQUFBLENBQUQsR0FBRyxDQUFiLENBQVosRUFBNEIsTUFBQSxDQUFPLElBQUMsQ0FBQSxDQUFELEdBQUcsSUFBQyxDQUFBLENBQUQsR0FBRyxDQUFiLENBQTVCO0lBQ0EsU0FBQSxDQUFVLElBQVYsRUFBZSxNQUFmO0lBQ0EsSUFBRyxJQUFDLENBQUEsTUFBRCxDQUFRLE1BQVIsRUFBZSxNQUFmLENBQUg7YUFDQyxJQUFBLENBQUssSUFBQyxDQUFBLElBQU4sRUFBVyxFQUFYLEVBQWMsTUFBQSxDQUFPLElBQUMsQ0FBQSxDQUFELEdBQUcsR0FBQSxHQUFJLElBQUMsQ0FBQSxDQUFMLEdBQU8sQ0FBakIsQ0FBZCxFQUREO0tBQUEsTUFFSyxJQUFHLE1BQUEsR0FBUyxFQUFaO01BQ0osSUFBRyxJQUFDLENBQUEsS0FBRCxLQUFVLElBQWI7ZUFBdUIsSUFBQSxDQUFLLENBQUEsUUFBQSxDQUFBLENBQVcsQ0FBQyxDQUFDLFdBQUYsQ0FBQSxDQUFYLENBQUEsU0FBQSxDQUFBLENBQXNDLENBQUMsQ0FBQyxDQUF4QyxDQUFBLFFBQUEsQ0FBQSxDQUFvRCxJQUFDLENBQUEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUE5RCxDQUFBLE9BQUEsQ0FBQSxDQUE4RSxJQUFDLENBQUEsQ0FBQyxDQUFDLEtBQWpGLENBQUEsQ0FBTCxFQUE4RixFQUE5RixFQUFpRyxNQUFBLENBQU8sSUFBQyxDQUFBLENBQUQsR0FBRyxHQUFBLEdBQUksSUFBQyxDQUFBLENBQUwsR0FBTyxDQUFqQixDQUFqRyxFQUF2QjtPQURJOztFQVpDOztFQWVQLE1BQVMsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFBO1dBQVMsQ0FBQSxNQUFBLENBQU8sSUFBQyxDQUFBLENBQVIsQ0FBQSxJQUFjLENBQWQsSUFBYyxDQUFkLElBQW1CLE1BQUEsQ0FBTyxJQUFDLENBQUEsQ0FBRCxHQUFLLElBQUMsQ0FBQSxDQUFiLENBQW5CLENBQUEsSUFBdUMsQ0FBQSxNQUFBLENBQU8sSUFBQyxDQUFBLENBQVIsQ0FBQSxJQUFjLENBQWQsSUFBYyxDQUFkLElBQW1CLE1BQUEsQ0FBTyxJQUFDLENBQUEsQ0FBRCxHQUFLLElBQUMsQ0FBQSxDQUFiLENBQW5CO0VBQWhEOztBQXBCSDs7QUFzQlAsT0FBQSxJQUFPLE1BQUEsR0FBUyxRQUFBLENBQUMsT0FBRCxFQUFVLFdBQVYsRUFBdUIsQ0FBdkIsRUFBMEIsQ0FBMUIsQ0FBQTtBQUNoQixNQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBO0VBQUMsQ0FBQSxHQUFJO0FBQ0o7RUFBQSxLQUFBLGNBQUE7O0lBQ0MsTUFBTSxDQUFDLENBQVAsR0FBVztJQUNYLE1BQU0sQ0FBQyxDQUFQLEdBQVc7SUFDWCxNQUFNLENBQUMsQ0FBUCxHQUFXLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFiLEdBQXNCLENBQXZCLENBQUEsR0FBNEI7SUFDdkMsTUFBTSxDQUFDLENBQVAsR0FBVztJQUNYLElBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFiLEdBQXNCLENBQXRCLElBQTJCLEdBQUEsS0FBTyxTQUFyQzttQkFBb0QsQ0FBQSxJQUFLLE1BQU0sQ0FBQyxDQUFQLEdBQVcsYUFBcEU7S0FBQSxNQUFBOzJCQUFBOztFQUxELENBQUE7O0FBRmUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnLHByaW50LHJhbmdlLHNjYWxleCxzY2FsZXkgfSBmcm9tICcuL2dsb2JhbHMuanMnIFxyXG5cclxuZXhwb3J0IGNsYXNzIEJ1dHRvblxyXG5cdGNvbnN0cnVjdG9yIDogKEB0aXRsZSwgQGhlbHAsIEBjbGljaykgLT4gXHJcblx0XHRAYWN0aXZlID0gdHJ1ZVxyXG5cdFx0QHQgPSBnLnRvdXJuYW1lbnRcclxuXHJcblx0ZHJhdyA6IC0+XHJcblx0XHR0ZXh0QWxpZ24gQ0VOVEVSLENFTlRFUlxyXG5cdFx0aWYgQHRpdGxlID09ICcnIHRoZW4gcmV0dXJuXHJcblxyXG5cdFx0ZmlsbCBpZiBAYWN0aXZlIHRoZW4gJ3llbGxvdycgZWxzZSAnbGlnaHRncmF5J1xyXG5cdFx0cmVjdCBzY2FsZXgoQHgpLHNjYWxleShAeSksc2NhbGV4KEB3KSxzY2FsZXkoQGgpXHJcblxyXG5cdFx0ZmlsbCAnYmxhY2snXHJcblx0XHR0ZXh0IEB0aXRsZSxzY2FsZXgoQHgrQHcvMiksc2NhbGV5KEB5K0BoLzIpXHJcblx0XHR0ZXh0QWxpZ24gTEVGVCxDRU5URVJcclxuXHRcdGlmIEBpbnNpZGUgbW91c2VYLG1vdXNlWVxyXG5cdFx0XHR0ZXh0IEBoZWxwLDEwLHNjYWxleShAeSszLjIqQGgvMilcclxuXHRcdGVsc2UgaWYgbW91c2VZIDwgMjBcclxuXHRcdFx0aWYgQHRpdGxlID09ICdJbicgdGhlbiB0ZXh0IFwiTWlzc2luZz0je2cuY2FsY01pc3NpbmcoKX0gUGxheWVycz0je2cuTn0gUGF1c2VkPSN7QHQucGF1c2VkLmxlbmd0aH0gUm91bmQ9I3tAdC5yb3VuZH1cIiwxMCxzY2FsZXkoQHkrMy4yKkBoLzIpICMgZWxzZSBwYWludGVkIG1hbnkgdGltZXNcclxuXHJcblx0aW5zaWRlIDogKHgseSkgLT4gc2NhbGV4KEB4KSA8PSB4IDw9IHNjYWxleChAeCArIEB3KSBhbmQgc2NhbGV5KEB5KSA8PSB5IDw9IHNjYWxleShAeSArIEBoKVxyXG5cclxuZXhwb3J0IHNwcmVhZCA9IChidXR0b25zLCBsZXR0ZXJXaWR0aCwgeSwgaCkgLT5cclxuXHR4ID0gbGV0dGVyV2lkdGhcclxuXHRmb3Iga2V5LGJ1dHRvbiBvZiBidXR0b25zXHJcblx0XHRidXR0b24ueCA9IHhcclxuXHRcdGJ1dHRvbi55ID0geVxyXG5cdFx0YnV0dG9uLncgPSAoYnV0dG9uLnRpdGxlLmxlbmd0aCArIDIpICogbGV0dGVyV2lkdGhcclxuXHRcdGJ1dHRvbi5oID0gaFxyXG5cdFx0aWYgYnV0dG9uLnRpdGxlLmxlbmd0aCA+IDAgb3Iga2V5ID09IFwiQXJyb3dVcFwiIHRoZW4geCArPSBidXR0b24udyArIGxldHRlcldpZHRoXHJcbiJdfQ==
//# sourceURL=c:\github\ELO-Pairings\coffee\button.coffee