// Generated by CoffeeScript 2.7.0
var datum, i, j, len, ref, start, x;

import {
  parseExpr
} from './parser.js';

import {
  g,
  print,
  range
} from './globals.js';

import {
  Button,
  spread
} from './button.js';

import {
  Lista
} from './lista.js';

import {
  Tournament
} from './tournament.js';

import {
  Tables
} from './page_tables.js';

import {
  Names
} from './page_names.js';

import {
  Standings
} from './page_standings.js';

import {
  Active
} from './page_active.js';

export var handleFile = function(data) {
  return g.tournament.fetchData(data);
};

g.RINGS = {
  'b': '•',
  ' ': ' ',
  'w': 'o'
};

g.ASCII = '0123456789abcdefg';

g.ALFABET = '123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'; // 62 ronder maximalt

datum = '';

g.tournament = null;

g.errors = []; // id för motsägelsefulla resultat. Tas bort med Delete

g.pages = [];

start = new Date();

ref = range(1_000_000);
for (j = 0, len = ref.length; j < len; j++) {
  i = ref[j];
  x = i * i;
}

print('**', new Date() - start);

window.windowResized = function() {
  resizeCanvas(windowWidth, windowHeight - 4);
  return g.LPP = Math.trunc(height / g.ZOOM[g.state] - 4.5);
};

window.setup = function() {
  createCanvas(windowWidth - 4, windowHeight - 4);
  textFont('Courier New');
  // textAlign window.LEFT,window.TOP
  textAlign(CENTER, CENTER);
  rectMode(window.CORNER);
  noStroke();
  g.ZOOM = [
    20,
    20,
    20,
    20 // vertical line distance for four states
  ];
  g.state = g.TABLES;
  g.LPP = Math.trunc(height / g.ZOOM[g.state] - 4.5);
  g.N = 0; // number of players
  g.tournament = new Tournament();
  g.state = g.ACTIVE;
  g.pages = [new Tables(), new Names(), new Standings(), new Active()];
  print(g.pages);
  // buttonOk = document.getElementById "buttonOk"
  // definition = document.getElementById "definition"
  // buttonEdit = document.getElementById "buttonEdit"
  // buttonEdit.hidden = true

  // buttonEdit.addEventListener 'click', () -> 
  // 	# hämta aktuella data till textarea. Borde ske samtidigt med att filen skapas.
  // 	buttonOk.hidden = false
  // 	definition.hidden = false
  // 	buttonEdit.hidden = true

  // buttonOk.addEventListener 'click', () -> 
  // 	g.tournament.fetchData()
  // 	buttonOk.hidden = true
  // 	definition.hidden = true
  // 	buttonEdit.hidden = false
  return window.windowResized();
};

window.draw = function() {
  background('gray');
  textSize(g.ZOOM[g.state]);
  return g.pages[g.state].draw();
};

window.mouseMoved = function(event) {
  return g.pages[g.state].mouseMoved(event);
};

window.mousePressed = function(event) {
  return g.pages[g.state].mousePressed(event);
};

window.mouseWheel = function(event) {
  return g.pages[g.state].mouseWheel(event);
};

window.keyPressed = function(event) {
  var key2;
  key2 = key;
  if (key2 === 'Control' || key2 === 'Shift' || key2 === 'I') {
    return;
  }
  if (key2 === '1') {
    key2 = 'K1';
  }
  if (key2 === '0') {
    key2 = 'K0';
  }
  return g.pages[g.state].keyPressed(event, key2);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWxvcGFpcmluZ3MuanMiLCJzb3VyY2VSb290IjoiLi5cXCIsInNvdXJjZXMiOlsiY29mZmVlXFxlbG9wYWlyaW5ncy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUE7O0FBQUEsT0FBQTtFQUFTLFNBQVQ7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxDQUFUO0VBQVcsS0FBWDtFQUFpQixLQUFqQjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLE1BQVQ7RUFBZ0IsTUFBaEI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxLQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsVUFBVDtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLE1BQVQ7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxLQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsU0FBVDtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLE1BQVQ7Q0FBQSxNQUFBOztBQUVBLE9BQUEsSUFBTyxVQUFBLEdBQWEsUUFBQSxDQUFDLElBQUQsQ0FBQTtTQUFVLENBQUMsQ0FBQyxVQUFVLENBQUMsU0FBYixDQUF1QixJQUF2QjtBQUFWOztBQUVwQixDQUFDLENBQUMsS0FBRixHQUFVO0VBQUMsR0FBQSxFQUFJLEdBQUw7RUFBVSxHQUFBLEVBQUksR0FBZDtFQUFtQixHQUFBLEVBQUk7QUFBdkI7O0FBQ1YsQ0FBQyxDQUFDLEtBQUYsR0FBVTs7QUFDVixDQUFDLENBQUMsT0FBRixHQUFZLGdFQWRaOztBQWdCQSxLQUFBLEdBQVE7O0FBRVIsQ0FBQyxDQUFDLFVBQUYsR0FBZTs7QUFDZixDQUFDLENBQUMsTUFBRixHQUFXLEdBbkJYOztBQW9CQSxDQUFDLENBQUMsS0FBRixHQUFVOztBQUVWLEtBQUEsR0FBUSxJQUFJLElBQUosQ0FBQTs7QUFDUjtBQUFBLEtBQUEscUNBQUE7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SyxDQUFDLENBQUMsQ0FBQyxLQUFILENBQVMsQ0FBQyxVQUFqQixDQUE0QixLQUE1QixFQUFrQyxJQUFsQztBQUxxQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlRXhwciB9IGZyb20gJy4vcGFyc2VyLmpzJ1xyXG5pbXBvcnQgeyBnLHByaW50LHJhbmdlIH0gZnJvbSAnLi9nbG9iYWxzLmpzJyBcclxuaW1wb3J0IHsgQnV0dG9uLHNwcmVhZCB9IGZyb20gJy4vYnV0dG9uLmpzJyBcclxuaW1wb3J0IHsgTGlzdGEgfSBmcm9tICcuL2xpc3RhLmpzJyBcclxuaW1wb3J0IHsgVG91cm5hbWVudCB9IGZyb20gJy4vdG91cm5hbWVudC5qcycgXHJcbmltcG9ydCB7IFRhYmxlcyB9IGZyb20gJy4vcGFnZV90YWJsZXMuanMnIFxyXG5pbXBvcnQgeyBOYW1lcyB9IGZyb20gJy4vcGFnZV9uYW1lcy5qcycgXHJcbmltcG9ydCB7IFN0YW5kaW5ncyB9IGZyb20gJy4vcGFnZV9zdGFuZGluZ3MuanMnIFxyXG5pbXBvcnQgeyBBY3RpdmUgfSBmcm9tICcuL3BhZ2VfYWN0aXZlLmpzJyBcclxuXHJcbmV4cG9ydCBoYW5kbGVGaWxlID0gKGRhdGEpIC0+IGcudG91cm5hbWVudC5mZXRjaERhdGEgZGF0YVx0XHJcblxyXG5nLlJJTkdTID0geydiJzon4oCiJywgJyAnOicgJywgJ3cnOidvJ31cclxuZy5BU0NJSSA9ICcwMTIzNDU2Nzg5YWJjZGVmZydcclxuZy5BTEZBQkVUID0gJzEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonICMgNjIgcm9uZGVyIG1heGltYWx0XHJcblxyXG5kYXR1bSA9ICcnXHJcblxyXG5nLnRvdXJuYW1lbnQgPSBudWxsXHJcbmcuZXJyb3JzID0gW10gIyBpZCBmw7ZyIG1vdHPDpGdlbHNlZnVsbGEgcmVzdWx0YXQuIFRhcyBib3J0IG1lZCBEZWxldGVcclxuZy5wYWdlcyA9IFtdXHJcblxyXG5zdGFydCA9IG5ldyBEYXRlKClcclxuZm9yIGkgaW4gcmFuZ2UgMV8wMDBfMDAwXHJcblx0eCA9IGkgKiBpXHJcbnByaW50ICcqKicsbmV3IERhdGUoKS1zdGFydCBcdFxyXG5cclxud2luZG93LndpbmRvd1Jlc2l6ZWQgPSAtPiBcclxuXHRyZXNpemVDYW52YXMgd2luZG93V2lkdGgsIHdpbmRvd0hlaWdodCAtIDRcclxuXHRnLkxQUCA9IE1hdGgudHJ1bmMgaGVpZ2h0IC8gZy5aT09NW2cuc3RhdGVdIC0gNC41XHJcblxyXG53aW5kb3cuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyB3aW5kb3dXaWR0aC00LHdpbmRvd0hlaWdodC00XHJcblx0dGV4dEZvbnQgJ0NvdXJpZXIgTmV3J1xyXG5cdCMgdGV4dEFsaWduIHdpbmRvdy5MRUZULHdpbmRvdy5UT1BcclxuXHR0ZXh0QWxpZ24gQ0VOVEVSLENFTlRFUlxyXG5cdHJlY3RNb2RlIHdpbmRvdy5DT1JORVJcclxuXHRub1N0cm9rZSgpXHJcblxyXG5cdGcuWk9PTSA9IFsyMCwyMCwyMCwyMF0gIyB2ZXJ0aWNhbCBsaW5lIGRpc3RhbmNlIGZvciBmb3VyIHN0YXRlc1xyXG5cdGcuc3RhdGUgPSBnLlRBQkxFU1xyXG5cdGcuTFBQID0gTWF0aC50cnVuYyBoZWlnaHQgLyBnLlpPT01bZy5zdGF0ZV0gLSA0LjVcclxuXHJcblx0Zy5OID0gMCAjIG51bWJlciBvZiBwbGF5ZXJzXHJcblx0Zy50b3VybmFtZW50ID0gbmV3IFRvdXJuYW1lbnQoKVxyXG5cdGcuc3RhdGUgPSBnLkFDVElWRVxyXG5cclxuXHRnLnBhZ2VzID0gW25ldyBUYWJsZXMsIG5ldyBOYW1lcywgbmV3IFN0YW5kaW5ncywgbmV3IEFjdGl2ZV1cclxuXHRwcmludCBnLnBhZ2VzXHJcblxyXG5cdCMgYnV0dG9uT2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCBcImJ1dHRvbk9rXCJcclxuXHQjIGRlZmluaXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCBcImRlZmluaXRpb25cIlxyXG5cdCMgYnV0dG9uRWRpdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIFwiYnV0dG9uRWRpdFwiXHJcblx0IyBidXR0b25FZGl0LmhpZGRlbiA9IHRydWVcclxuXHJcblx0IyBidXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIgJ2NsaWNrJywgKCkgLT4gXHJcblx0IyBcdCMgaMOkbXRhIGFrdHVlbGxhIGRhdGEgdGlsbCB0ZXh0YXJlYS4gQm9yZGUgc2tlIHNhbXRpZGlndCBtZWQgYXR0IGZpbGVuIHNrYXBhcy5cclxuXHQjIFx0YnV0dG9uT2suaGlkZGVuID0gZmFsc2VcclxuXHQjIFx0ZGVmaW5pdGlvbi5oaWRkZW4gPSBmYWxzZVxyXG5cdCMgXHRidXR0b25FZGl0LmhpZGRlbiA9IHRydWVcclxuXHJcblx0IyBidXR0b25Pay5hZGRFdmVudExpc3RlbmVyICdjbGljaycsICgpIC0+IFxyXG5cdCMgXHRnLnRvdXJuYW1lbnQuZmV0Y2hEYXRhKClcclxuXHQjIFx0YnV0dG9uT2suaGlkZGVuID0gdHJ1ZVxyXG5cdCMgXHRkZWZpbml0aW9uLmhpZGRlbiA9IHRydWVcclxuXHQjIFx0YnV0dG9uRWRpdC5oaWRkZW4gPSBmYWxzZVxyXG5cclxuXHR3aW5kb3cud2luZG93UmVzaXplZCgpXHJcblxyXG53aW5kb3cuZHJhdyA9IC0+IFxyXG5cdGJhY2tncm91bmQgJ2dyYXknXHJcblx0dGV4dFNpemUgZy5aT09NW2cuc3RhdGVdXHJcblx0Zy5wYWdlc1tnLnN0YXRlXS5kcmF3KClcclxuXHJcbndpbmRvdy5tb3VzZU1vdmVkID0gKGV2ZW50KSAtPiBnLnBhZ2VzW2cuc3RhdGVdLm1vdXNlTW92ZWQgZXZlbnRcclxud2luZG93Lm1vdXNlUHJlc3NlZCA9IChldmVudCkgLT4gZy5wYWdlc1tnLnN0YXRlXS5tb3VzZVByZXNzZWQgZXZlbnRcclxud2luZG93Lm1vdXNlV2hlZWwgICA9IChldmVudCkgLT4gZy5wYWdlc1tnLnN0YXRlXS5tb3VzZVdoZWVsIGV2ZW50XHJcbndpbmRvdy5rZXlQcmVzc2VkICAgPSAoZXZlbnQpIC0+IFxyXG5cdGtleTIgPSBrZXlcclxuXHRpZiBrZXkyIGluIFsnQ29udHJvbCcsJ1NoaWZ0JywnSSddIHRoZW4gcmV0dXJuXHJcblx0aWYga2V5MiA9PSAnMScgdGhlbiBrZXkyID0gJ0sxJ1xyXG5cdGlmIGtleTIgPT0gJzAnIHRoZW4ga2V5MiA9ICdLMCdcclxuXHRnLnBhZ2VzW2cuc3RhdGVdLmtleVByZXNzZWQgZXZlbnQsa2V5MlxyXG4iXX0=
//# sourceURL=c:\github\ELO-Pairings\coffee\elopairings.coffee